!function(t,i,e,s){function a(i,e){this.element=i,this.obj=t(this.element),this.options=t.extend({},o,e),this.defaults=o,this.name=n,r.apply(this)}var n="fullscreenSlider",o={autoPlayState:!1,autoPlayTime:4,alignIMG:"",boundary:t(i),startAtSlide:0,pauseNewImage:0,hideThumbs:!1},r=function(){if(u(this.options.boundary),h.apply(this),!this.descriptions.length)return p("There are no description elements"),p("Has not been started"),!1;d.apply(this),l.apply(this)},h=function(){this.image=t('<div class="topImg loading-placeholder"></div>'),this.lastImage=!1,this.imageHolder=t(".image-holder",this.obj).append(this.image),this.descriptions=t(".content-holder>li",this.obj),this.thumbsHolder=t(".session-btn-wrapper"),this.spinner=this.createSpinner(),this.currImg=m(this),this.prevImg=null,this.loadComplete=!0,this.autoPlayTimer},d=function(){var e=this;t(i).on("resize.fullscreenSlider",function(){e.resizeImageHandler()})},l=function(){this.loading(),this.descriptions.css({left:this.options.boundary.width(),display:"none"}),this.image.bind("load",c.apply(this,arguments)),this.buildThumbnails(),this.descriptions.eq(this.currImg).data("active")||(this.currImg=this.descriptions.length-1),this.goTo(this.currImg)},u=function(s){s[0]===i&&(s=t(e.body)),s.css({overflow:"hidden"})},c=function(){this.options.hideThumbs?this.thumbsHolder.css({display:"none"}):this.thumbsHolder.animate({opacity:1},1e3,"easeInOutCubic")},p=function(t){};a.prototype.thumbHandler=function(i){t(this.returnCurrentThumbnail(this.prevImg)).removeClass("active"),i.addClass("active")};var m=function(t){var i=t.options.startAtSlide;return(i>=t.descriptions.length||!jQuery.isNumeric(i))&&(p("Invalid index"),i=0),i};a.prototype.autoPlayHandler=function(){var t=this;this.autoPlayTimer=setTimeout(function(){t.options.autoPlayState&&t.goTo(t.currImg+1)},1e3*this.options.autoPlayTime)},a.prototype.buildThumbnails=function(){var i=this,e=this.descriptions;e.length&&(e.each(function(){var s=t(this),a=e.index(s);s.data("active")&&(i.currImg=a),i.thumbsHolder.append(i.createThumb(e.index(s)+1,s.data()))}),this.obj.append(this.thumbsHolder))},a.prototype.clockHandler=function(i){var e=this,s=t(i.find(".clock"));if(s.length&&"started"!=s.data("time"))if(s.data("parent",i),s.data("time"))this.setClock(s);else{t.getJSON("/ajax/?flag=timeclass",{session:i.data("hid")},function(t){s.data("time",t.time),e.setClock(s)})}},a.prototype.setClock=function(i){var e=this;i.FlipClock(i.data("time"),{clockFace:"HourlyCounter",countdown:!0,callbacks:{start:function(){i.data("time","started")},stop:function(){p("The clock has stopped!");var s=i.data("parent"),a=s.find(".stime"),n=e.descriptions.index(s);e.returnCurrentThumbnail(n).removeClass("yes").addClass("no"),n==e.currImg&&e.goToNext(),s.find("h5").html("You Missed..."),a.html(a.text().replace("Begins","Began")),i.fadeOut("slow",function(){t(this).remove()})}}}),i.fadeIn()},a.prototype.changeImageHandler=function(){var i=this.descriptions.eq(this.currImg),e=this.options.boundary.width();this.loadComplete=!1,this.loading(),this.clockHandler(i),this.lastImage&&this.descriptions.eq(this.prevImg).animate({left:-e},500,"easeInCubic",function(){t(this).css({display:"none"})}),i.css({left:e,display:"block"}).animate({left:0},1e3,"easeOutCubic"),this.lastImage=this.image,this.image=t("<img class='bottomImg' src='"+i.data("image")+"' alt='"+(i.data("alt")||"")+"'>").bind("load",this.loadImageHandler.bind(this)),this.imageHolder.append(this.image)},a.prototype.loadImageHandler=function(){var i=this;setTimeout(function(){i.unloading(),i.image.unbind("load",i.loadImageHandler),i.resizeImageHandler(),i.lastImage.stop().animate({opacity:"0"},1e3,"easeInOutCubic",function(){t(this).remove(),i.image.removeClass("bottomImg").addClass("topImg"),i.loadComplete=!0,i.autoPlayHandler()})},1e3*this.options.pauseNewImage)},a.prototype.resizeImageHandler=function(){var t,i,e=this.options.boundary,s=this.image,a=s.height()/s.width(),n=100*a;switch(e.height()/e.width()>a?(n=s.width()/s.height()*100,this.image.css({height:e.height(),width:e.height()*n/100})):(n=s.height()/s.width()*100,this.image.css({width:e.width(),height:e.width()*n/100})),this.options.alignIMG){case"top":t=-(s.width()-e.width())/2,i=0;break;case"bottom":t=-(s.width()-e.width())/2,i=-(s.height()-e.height());break;case"right":t=-(s.width()-e.width()),i=-(s.height()-e.height())/2;break;case"left":t=0,i=-(s.height()-e.height())/2;break;case"top_left":t=0,i=0;break;case"top_right":t=-(s.width()-e.width()),i=0;break;case"bottom_right":t=-(s.width()-e.width()),i=-(s.height()-e.height());break;case"bottom_left":t=0,i=-(s.height()-e.height());break;default:t=-(s.width()-e.width())/2,i=-(s.height()-e.height())/2}this.image.css({left:t,top:i,position:"absolute"})},a.prototype.goTo=function(t){var i=parseInt(t);return(!jQuery.isNumeric(t)||i>=this.descriptions.length)&&(p("Invalid index, showing slide 0"),i=0),this.loadComplete?i==this.currImg&&this.lastImage?(p("You can not reload the same index"),!1):(this.prevImg=this.currImg,this.currImg=i,this.thumbHandler(this.returnCurrentThumbnail()),clearTimeout(this.autoPlayTimer),this.changeImageHandler(),fancyLinks(),this):(p("Still loading slide "+this.currImg),!1)},a.prototype.goToNext=function(){var t=this.currImg+1;return t>=this.descriptions.length&&(t=0),this.goTo(t)},a.prototype.goToPrev=function(){var t=this.currImg-1;return t<0&&(t=this.descriptions.length-1),this.goTo(t)},a.prototype.play=function(){return this.options.autoPlayState=!0,this.autoPlayHandler(),p("Auto play started"),this},a.prototype.stop=function(){return this.options.autoPlayState=!1,clearTimeout(this.autoPlayTimer),p("Auto play stopped"),this},a.prototype.loading=function(){this.obj.append(this.spinner.css({opacity:0}).stop().animate({opacity:1},600,"easeInOutCubic"))},a.prototype.unloading=function(){var t=this.spinner;t.animate({opacity:0},600,"easeInOutCubic",function(){t.remove()})},a.prototype.returnCurrentThumbnail=function(i){var e=jQuery.isNumeric(i)?parseInt(i):this.currImg;return t("div.goto",this.thumbsHolder).eq(e)},a.prototype.getCurrentSlide=function(){return p("Current slide is "+this.currImg),this.currImg},a.prototype.createSpinner=function(){return t('<div class="imgSpinner"></div>')},a.prototype.createThumb=function(i,e){var s=this;return thumb=t("<div></div>").click(function(i){return i.preventDefault(),s.goTo(t(this).index()),!1}).hover(function(){t(this).find("span").fadeIn("fast")},function(){t(this).find("span").fadeOut("fast")}).addClass("goto "+e.flag).html(i+"<span>"+e.name+"</span>"),thumb},t.fn[n]=function(i){return this.each(function(){t.data(this,n)||t.data(this,n,new a(this,i))})}}(jQuery,window,document);